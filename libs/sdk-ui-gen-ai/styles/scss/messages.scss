// (C) 2024 GoodData Corporation

@use "sass:color";
@use "variables" as variables;
@use "@gooddata/sdk-ui-kit/styles/scss/variables" as kit-variables;
@use "@gooddata/sdk-ui-kit/styles/scss/mixins" as kit-mixins;
@use "@gooddata/sdk-ui-kit/styles/scss/Form/mixins" as form-mixins;

.gd-gen-ai-chat__messages {
    flex: 1;
    overflow-y: auto;

    // Use padding on the right to prevent the scrollbar from overlapping the content
    margin: variables.$y-spacing 0 0 variables.$x-spacing;
    padding-right: variables.$x-spacing;

    &__scroll {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    &__message {
        display: flex;

        &--user {
            $tail-height: 7px;
            $tail-width: 10px;

            max-width: 80%;
            background-color: kit-variables.$gd-palette-primary-base;
            border-radius: 3px 3px 0 3px;
            padding: 4.5px 12px;
            position: relative;
            align-self: flex-end;
            margin-bottom: 29px;
            animation: gd-gen-ai-message-in 0.3s ease-out;

            &::after {
                content: "";
                position: absolute;
                bottom: -$tail-height;
                right: 0;
                border: 0 solid transparent;
                border-top: $tail-height solid kit-variables.$gd-palette-primary-base;
                border-left-width: $tail-width;
                width: 0;
                height: 0;
            }

            .gd-gen-ai-chat__messages__contents {
                color: kit-variables.$gd-color-white;
            }

            &--cancelled {
                background-color: kit-variables.$gd-palette-primary-base-t80;
            }

            &--cancelled::after {
                border-top-color: kit-variables.$gd-palette-primary-base-t80;
            }
        }

        &--assistant {
            display: flex;
            flex-direction: row;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 39px;

            &--cancelled .gd-gen-ai-chat__messages__contents {
                color: kit-variables.$gd-color-disabled;
            }
        }

        &--error .gd-gen-ai-chat__messages__contents {
            flex: unset;
            padding: 4.5px 12px;
            border-radius: 3px;
            background: kit-variables.$gd-palette-error-dimmed;
            color: kit-variables.$gd-palette-error-base;
        }

        &__found_objects ul {
            margin: 0;
        }
    }

    &__contents {
        flex: 1;
        padding: 4.5px 0;
    }

    &__empty {
        display: flex;
        flex-direction: column;
        align-items: flex-start;

        &__h1--accent {
            color: kit-variables.$gd-palette-primary-base;
        }

        & .gd-button {
            margin-top: 2em;

            & + .gd-button {
                margin-top: 1em;
                margin-left: 0;
            }
        }
    }

    &__visualization {
        margin: 10px 0;
        padding: 10px;
        border: 1px solid kit-variables.$is-focused-background;
        background: kit-variables.$gd-color-white;
        border-radius: 8px;

        &__wrapper {
            height: 250px;
        }

        &__title {
            text-align: center;
        }
    }
}

@keyframes gd-gen-ai-message-in {
    0% {
        opacity: 0;
        transform: translateY(10px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
